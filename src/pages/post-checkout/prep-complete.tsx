import {
  Container,
  Typography,
  Box,
  Button,
  Paper,
  Divider,
} from '@mui/material';
import OnboardingLayout from '@/layouts/OnboardingLayout';
import { ReactElement } from 'react';
import { toast } from 'react-hot-toast';
import Router from 'next/router';
import { useSupabaseClient } from '@supabase/auth-helpers-react';
import { usePatient } from '@/components/hooks/data';
import { Pathnames } from '@/types/pathnames';

const PrepComplete = () => {
  const supabase = useSupabaseClient();
  const { data: patient } = usePatient();

  const handleClick = async () => {
    const { data: updateStatus, error: updateError } = await supabase
      .from('patient')
      .update({
        status: 'ACTIVE',
      })
      .eq('id', patient?.id);
    if (updateError) toast.error('Please try again');

    return Router.push(Pathnames.POST_CHECKOUT_COMPLETE_VISIT);
  };
  return (
    <>
      <Container maxWidth="sm" sx={{ pt: 4 }}>
        <Box textAlign="center" mb={4}>
          <Typography variant="h2" fontWeight="bold">
            Thanks!
          </Typography>
          <Typography color="textSecondary" sx={{ marginTop: 1 }}>
            Your information was sent to your provider
          </Typography>
        </Box>

        <Paper
          variant="outlined"
          sx={{
            borderRadius: '50px',
            overflow: 'hidden',
            mb: 6,
            borderColor: 'black',
            borderWidth: '1px',
            marginX: '20px',
          }}
        >
          <Box bgcolor="#e0f4e4" p={5}>
            <Typography variant="h2" textAlign="center" fontWeight="bold">
              Whatâ€™s Next?
            </Typography>
          </Box>
          <Box p={8}>
            <Box display="flex" mb={4}>
              <Box pr={2} alignSelf="center" marginRight={2}>
                <svg
                  width="45"
                  height="52"
                  viewBox="0 0 45 52"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M38.6997 13.8166C38.5402 13.6521 38.322 13.5576 38.0929 13.5538C37.8638 13.55 37.6426 13.6372 37.4777 13.7963C37.3128 13.9554 37.2177 14.1733 37.2133 14.4024C37.2089 14.6315 37.2954 14.853 37.4541 15.0183C40.2821 17.9518 42.1845 21.6526 42.9242 25.6597C43.6639 29.6667 43.2083 33.8028 41.614 37.5527C40.0198 41.3026 37.3574 44.5006 33.9585 46.7481C30.5597 48.9957 26.5747 50.1935 22.5 50.1923H2.95445L7.81168 45.3347C7.97384 45.1725 8.06501 44.9527 8.06517 44.7234C8.06533 44.4941 7.97447 44.2741 7.81255 44.1118C3.96506 40.2644 1.78151 35.0604 1.73165 29.6195C1.68178 24.1787 3.7696 18.9356 7.54593 15.0183C7.70454 14.853 7.79113 14.6315 7.7867 14.4024C7.78227 14.1733 7.68718 13.9554 7.52229 13.7963C7.3574 13.6372 7.13616 13.55 6.90708 13.5538C6.67799 13.5576 6.45977 13.6521 6.30024 13.8166C2.31298 17.9524 0.0592137 23.4571 0.00115028 29.2017C-0.0569131 34.9463 2.08513 40.4954 5.98797 44.711L0.253535 50.4459C0.132508 50.5669 0.0500845 50.7211 0.0166873 50.8889C-0.01671 51.0568 0.000419489 51.2308 0.0659095 51.3889C0.1314 51.547 0.242309 51.6821 0.384611 51.7772C0.526912 51.8723 0.694216 51.9231 0.865362 51.9231H22.5C26.9144 51.9242 31.2315 50.6264 34.9136 48.1915C38.5957 45.7565 41.48 42.2919 43.207 38.2293C44.9341 34.1668 45.4276 29.6859 44.6261 25.3449C43.8247 21.0038 41.7636 16.9946 38.6997 13.8166Z"
                    fill="#1B1B1B"
                  />
                  <path
                    d="M12.1157 38.0769H32.8849C33.5732 38.0762 34.2331 37.8024 34.7198 37.3157C35.2066 36.829 35.4803 36.1691 35.4811 35.4808V2.59615C35.4803 1.90784 35.2066 1.24794 34.7198 0.761226C34.2331 0.274515 33.5732 0.000751323 32.8849 0H12.1157C11.4274 0.000751323 10.7675 0.274515 10.2808 0.761226C9.79405 1.24794 9.52028 1.90784 9.51953 2.59615V35.4808C9.52028 36.1691 9.79405 36.829 10.2808 37.3157C10.7675 37.8024 11.4274 38.0762 12.1157 38.0769ZM26.0757 1.73077L25.4987 2.59615H19.5019L18.9249 1.73077H26.0757ZM11.2503 2.59615C11.2505 2.36671 11.3418 2.14673 11.504 1.98449C11.6663 1.82225 11.8862 1.731 12.1157 1.73077H16.8449L18.3188 3.94156C18.3978 4.06011 18.5048 4.15732 18.6304 4.22455C18.756 4.29178 18.8963 4.32694 19.0388 4.32692H25.9618C26.1043 4.32694 26.2446 4.29178 26.3702 4.22455C26.4958 4.15732 26.6028 4.06011 26.6818 3.94156L28.1557 1.73077H32.8849C33.1144 1.731 33.3343 1.82225 33.4966 1.98449C33.6588 2.14673 33.7501 2.36671 33.7503 2.59615V35.4808C33.7501 35.7102 33.6588 35.9302 33.4966 36.0924C33.3343 36.2547 33.1144 36.3459 32.8849 36.3462H12.1157C11.8862 36.3459 11.6663 36.2547 11.504 36.0924C11.3418 35.9302 11.2505 35.7102 11.2503 35.4808V2.59615Z"
                    fill="#1B1B1B"
                  />
                  <path
                    d="M22.5008 20.7691C23.3565 20.7691 24.1931 20.5153 24.9047 20.0399C25.6162 19.5644 26.1708 18.8886 26.4983 18.098C26.8258 17.3074 26.9115 16.4374 26.7445 15.598C26.5776 14.7587 26.1655 13.9877 25.5603 13.3826C24.9552 12.7774 24.1842 12.3653 23.3449 12.1984C22.5056 12.0314 21.6356 12.1171 20.8449 12.4446C20.0543 12.7721 19.3785 13.3267 18.903 14.0383C18.4276 14.7498 18.1738 15.5864 18.1738 16.4422C18.1752 17.5893 18.6315 18.6891 19.4426 19.5003C20.2538 20.3114 21.3536 20.7677 22.5008 20.7691ZM22.5008 13.846C23.0142 13.846 23.5162 13.9983 23.9431 14.2835C24.37 14.5688 24.7028 14.9743 24.8993 15.4487C25.0958 15.923 25.1472 16.445 25.047 16.9486C24.9468 17.4523 24.6996 17.9148 24.3365 18.2779C23.9734 18.641 23.5108 18.8883 23.0072 18.9884C22.5036 19.0886 21.9816 19.0372 21.5072 18.8407C21.0329 18.6442 20.6274 18.3114 20.3421 17.8845C20.0569 17.4576 19.9046 16.9556 19.9046 16.4422C19.9053 15.7538 20.1791 15.0939 20.6658 14.6072C21.1525 14.1205 21.8124 13.8468 22.5008 13.846Z"
                    fill="#1B1B1B"
                  />
                  <path
                    d="M17.3068 34.6154C17.4204 34.6154 17.533 34.5931 17.638 34.5496C17.743 34.5061 17.8384 34.4424 17.9188 34.362C17.9991 34.2816 18.0629 34.1862 18.1064 34.0812C18.1498 33.9762 18.1722 33.8637 18.1722 33.75V28.5577C18.1722 27.4101 18.628 26.3096 19.4395 25.4981C20.251 24.6866 21.3515 24.2308 22.4991 24.2308C23.6467 24.2308 24.7472 24.6866 25.5587 25.4981C26.3702 26.3096 26.826 27.4101 26.826 28.5577V33.75C26.826 33.9795 26.9172 34.1996 27.0795 34.3619C27.2418 34.5242 27.4619 34.6154 27.6914 34.6154C27.9209 34.6154 28.141 34.5242 28.3033 34.3619C28.4656 34.1996 28.5568 33.9795 28.5568 33.75V28.5577C28.5568 26.9511 27.9186 25.4103 26.7825 24.2743C25.6465 23.1382 24.1057 22.5 22.4991 22.5C20.8925 22.5 19.3517 23.1382 18.2157 24.2743C17.0796 25.4103 16.4414 26.9511 16.4414 28.5577V33.75C16.4414 33.8637 16.4637 33.9762 16.5072 34.0812C16.5507 34.1862 16.6144 34.2816 16.6948 34.362C16.7752 34.4424 16.8706 34.5061 16.9756 34.5496C17.0806 34.5931 17.1931 34.6154 17.3068 34.6154Z"
                    fill="#1B1B1B"
                  />
                </svg>
              </Box>
              <Box>
                <Typography variant="h6" fontWeight="bold" marginBottom={4}>
                  Medical review of your consultation
                </Typography>
                <Typography variant="body2" color="textSecondary">
                  A licensed medical provider will review your information to
                  find the right treatment for you.
                </Typography>
              </Box>
            </Box>

            <Divider />

            <Box display="flex" mt={4}>
              <Box pr={2} alignSelf="center" marginRight={2}>
                <svg
                  width="50"
                  height="44"
                  viewBox="0 0 50 44"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M43.1023 18.8609C40.4288 18.8609 38.2531 21.0193 38.2531 23.6721V37.5014C38.2531 40.1542 40.4287 42.3128 43.1022 42.3128C45.7757 42.3128 47.9513 40.1543 47.9513 37.5015L47.9513 23.672C47.9513 21.0193 45.7756 18.861 43.1023 18.8609ZM43.1023 43.3526C39.8502 43.3526 37.2051 40.7277 37.2051 37.5015L37.2051 23.672C37.2051 20.4459 39.8502 17.8213 43.1022 17.8213C46.3543 17.8212 48.9993 20.4459 48.9993 23.6721L48.9994 37.5014C48.9994 40.7276 46.3542 43.3526 43.1023 43.3526Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M48.4753 31.1066H37.7292C37.4398 31.1066 37.2051 30.874 37.2051 30.5869C37.2051 30.2996 37.4398 30.067 37.7291 30.067L48.4753 30.0669C48.7647 30.0669 48.9993 30.2997 48.9993 30.5869C48.9994 30.8739 48.7646 31.1067 48.4753 31.1066Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M27.4079 28.6999C23.6253 28.6999 20.548 31.7534 20.548 35.5065C20.5481 39.2596 23.6253 42.3132 27.4079 42.3132C31.1905 42.3132 34.2678 39.2596 34.2678 35.5065C34.2679 31.7533 31.1905 28.7 27.4079 28.6999ZM27.4079 43.3529C23.0479 43.3529 19.5 39.8329 19.5 35.5065C19.5 31.18 23.0479 27.6602 27.4079 27.6602C31.769 27.6601 35.3158 31.18 35.3158 35.5065C35.3158 39.8329 31.769 43.353 27.4079 43.3529Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M34.6667 37.3824H20.151C19.8617 37.3824 19.627 37.1499 19.627 36.8627C19.627 36.5755 19.8617 36.3428 20.151 36.3428L34.6667 36.3428C34.9559 36.3428 35.1906 36.5756 35.1906 36.8627C35.1906 37.1498 34.9559 37.3825 34.6667 37.3824Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M34.6656 34.6693H20.151C19.8617 34.6693 19.627 34.4366 19.627 34.1494C19.627 33.8622 19.8617 33.6295 20.151 33.6295L34.6656 33.6294C34.9559 33.6294 35.1906 33.8623 35.1906 34.1494C35.1906 34.4366 34.9559 34.6693 34.6656 34.6693Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M4.18356 2.03984C3.87247 2.03984 3.62024 2.29076 3.62024 2.59911L3.62033 5.9569C3.62033 6.26518 3.87241 6.51613 4.18353 6.51613L20.0158 6.51607C20.3269 6.51607 20.5801 6.26525 20.5801 5.9569L20.5801 2.59905C20.5801 2.29064 20.3268 2.03988 20.0157 2.03988L4.18356 2.03984ZM20.0158 7.55594H4.18356C3.29504 7.55594 2.57227 6.8387 2.57227 5.9569L2.5723 2.59905C2.5723 1.71747 3.29494 1.00012 4.18353 1.00012L20.0158 1C20.9043 1 21.6281 1.71747 21.6281 2.59911L21.6282 5.9569C21.6282 6.83863 20.9043 7.55601 20.0158 7.55594Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M22.6759 21.9442H1.5241C1.23474 21.9442 1 21.7115 1 21.4243C1.00003 21.1372 1.23474 20.9044 1.52403 20.9044L22.6759 20.9043C22.9652 20.9043 23.1998 21.1372 23.1998 21.4243C23.1999 21.7113 22.9651 21.9442 22.6759 21.9442Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M20.4882 33.4671H1.5241C1.23474 33.4671 1 33.2343 1 32.9472C1.00003 32.66 1.23474 32.4273 1.52403 32.4273L20.4882 32.4272C20.7774 32.4272 21.0122 32.66 21.0122 32.9472C21.0122 33.2343 20.7774 33.4672 20.4882 33.4671Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M6.30727 17.9223C6.01803 17.9223 5.7832 17.6895 5.7832 17.4024V15.3856C5.7832 15.0984 6.01794 14.8657 6.3072 14.8657C6.59659 14.8657 6.83121 15.0985 6.83121 15.3856L6.83127 17.4023C6.83127 17.6894 6.5965 17.9223 6.30727 17.9223Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M10.1686 17.9223C9.87936 17.9223 9.64453 17.6895 9.64453 17.4024V15.3856C9.64453 15.0984 9.87927 14.8657 10.1685 14.8657C10.4579 14.8657 10.6925 15.0985 10.6925 15.3856L10.6926 17.4023C10.6926 17.6894 10.4578 17.9223 10.1686 17.9223Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M14.0318 17.9223C13.7425 17.9223 13.5078 17.6895 13.5078 17.4024V15.3856C13.5078 15.0984 13.7425 14.8657 14.0318 14.8657C14.3211 14.8657 14.5558 15.0985 14.5558 15.3856L14.5559 17.4023C14.5559 17.6894 14.3211 17.9223 14.0318 17.9223Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M17.8932 17.9223C17.6027 17.9223 17.3691 17.6895 17.3691 17.4024V15.3856C17.3691 15.0984 17.6027 14.8657 17.8931 14.8657C18.1824 14.8657 18.4171 15.0985 18.4171 15.3856V17.4023C18.4171 17.6894 18.1824 17.9223 17.8932 17.9223Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M6.30727 39.5057C6.01803 39.5057 5.7832 39.273 5.7832 38.9858V36.969C5.7832 36.6819 6.01794 36.4492 6.3072 36.4492C6.59659 36.4492 6.83121 36.682 6.83121 36.9691L6.83127 38.9858C6.83127 39.2729 6.5965 39.5058 6.30727 39.5057Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M10.1686 39.5057C9.87936 39.5057 9.64453 39.273 9.64453 38.9858V36.969C9.64453 36.6819 9.87927 36.4492 10.1685 36.4492C10.4579 36.4492 10.6925 36.682 10.6925 36.9691L10.6926 38.9858C10.6926 39.2729 10.4578 39.5058 10.1686 39.5057Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M14.0318 39.5057C13.7425 39.5057 13.5078 39.273 13.5078 38.9858V36.969C13.5078 36.6819 13.7425 36.4492 14.0318 36.4492C14.3211 36.4492 14.5558 36.682 14.5558 36.9691L14.5559 38.9858C14.5559 39.2729 14.3211 39.5058 14.0318 39.5057Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M17.8932 39.5057C17.6027 39.5057 17.3691 39.273 17.3691 38.9858V36.969C17.3691 36.6819 17.6027 36.4492 17.8931 36.4492C18.1824 36.4492 18.4171 36.682 18.4171 36.9691V38.9858C18.4171 39.2729 18.1824 39.5058 17.8932 39.5057Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M11.5884 30.2055H12.6092V28.2124C12.6092 27.9252 12.8438 27.6925 13.1331 27.6925L15.1429 27.6925V26.6794H13.1331C12.8439 26.6794 12.6091 26.4466 12.6091 26.1595L12.6092 24.1662H11.5884V26.1595C11.5884 26.4465 11.3537 26.6795 11.0644 26.6795L9.05578 26.6794V27.6925H11.0645C11.3537 27.6925 11.5884 27.9253 11.5884 28.2124V30.2055ZM13.1331 31.2451H11.0645C10.7751 31.2451 10.5404 31.0125 10.5404 30.7255L10.5405 28.7322H8.53188C8.24255 28.7322 8.00781 28.4995 8.00781 28.2124L8.00787 26.1595C8.00787 25.8723 8.24249 25.6396 8.53178 25.6396L10.5405 25.6395V23.6465C10.5405 23.3593 10.7751 23.1265 11.0644 23.1265L13.1331 23.1265C13.4225 23.1265 13.6571 23.3594 13.6571 23.6465L13.6571 25.6395H15.6657C15.9562 25.6395 16.1908 25.8723 16.1908 26.1595L16.1908 28.2124C16.1908 28.4995 15.9561 28.7323 15.6657 28.7323L13.6571 28.7322V30.7255C13.6571 31.0124 13.4224 31.2453 13.1331 31.2451Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M22.6759 30.4033C22.3865 30.4033 22.1518 30.1706 22.1518 29.8835L22.1519 15.7774C22.1519 14.246 21.0743 12.8855 19.5319 12.4688C18.7928 12.2693 18.2972 11.6349 18.2972 10.8904L18.2973 7.0359C18.2973 6.74883 18.5319 6.51611 18.8212 6.51611C19.1106 6.51608 19.3452 6.74889 19.3452 7.03602L19.3452 10.8903C19.3452 11.1639 19.5264 11.3898 19.807 11.4655C21.8048 12.0051 23.1998 13.7782 23.1998 15.7775L23.1999 29.8835C23.1999 30.1705 22.9651 30.4034 22.6759 30.4033ZM18.5658 43.3528H5.63307C3.0786 43.3528 1 41.3446 1 38.8764L1.00003 15.7774C1.00003 13.778 2.39515 12.0051 4.39176 11.4655C4.67234 11.3898 4.85355 11.164 4.85355 10.8904L4.85358 7.0359C4.85358 6.74883 5.08825 6.51611 5.37755 6.51611C5.66684 6.51608 5.90152 6.74889 5.90152 7.03602L5.90155 10.8903C5.90155 11.6349 5.40593 12.2693 4.66795 12.4688C3.12551 12.8854 2.048 14.246 2.048 15.7775L2.0481 38.8763C2.0481 40.7711 3.656 42.313 5.63298 42.313L18.5658 42.313C19.9031 42.313 21.1213 41.602 21.7457 40.4578C21.8834 40.2053 22.202 40.1115 22.4564 40.2483C22.7108 40.3849 22.8046 40.7006 22.6671 40.953C21.8593 42.4331 20.2873 43.3528 18.5658 43.3528Z"
                    fill="#1B1B1B"
                    stroke="#1B1B1B"
                    stroke-width="0.211765"
                  />
                </svg>
              </Box>
              <Box>
                <Typography variant="h6" fontWeight="bold" marginBottom={4}>
                  Medication is prescribed and shipped
                </Typography>
                <Typography variant="body2" color="textSecondary">
                  If medication is prescribed, our pharmacy will fill your
                  prescription and ship it to you, free!
                  <br />
                  <em>*Excludes overnight shipping.</em>
                </Typography>
              </Box>
            </Box>
          </Box>
        </Paper>

        <Box pb={8} display="flex" justifyContent="center">
          <Button
            fullWidth
            variant="contained"
            sx={{
              bgcolor: { bgcolor: '#1B5E20' },
              '&:hover': '#2E7D32',
            }}
            onClick={handleClick}
          >
            Go to my account
          </Button>
        </Box>
      </Container>
    </>
  );
};

PrepComplete.getLayout = (page: ReactElement) => {
  return <OnboardingLayout>{page}</OnboardingLayout>;
};

export default PrepComplete;
